@model FilmOfTheDay.Web.Models.Search.SearchViewModel
@using FilmOfTheDay.Web.Models.Popup;
@using System.Security.Claims

@{
    ViewData["Title"] = "Search";
    var loggedInUserId = User.FindFirstValue(ClaimTypes.NameIdentifier);
}

<div class="max-w-full sm:w-1/2 mx-auto py-8">
    <h1 class="text-2xl text-brand-light font-bold mb-6 text-center">Search Results</h1>

    @if (Model.Users == null || !Model.Users.Any())
    {
        <p class="flex justify-center text-brand-muted">No users found.</p>
    }
    else
    {
        <ul class="bg-brand-black">
            @foreach (var user in Model.Users)
            {
                <li class="flex items-center justify-between p-4 hover:bg-brand-black-hover transition">

                    <!-- Left section: profile image + name -->
                    <div class="flex items-center">
                        <img src="~/images/profile-placeholder.png" 
                             alt="@user.UserName" 
                             class="w-10 h-10 rounded-full mr-3 object-cover" />

                        <a asp-controller="Profile" 
                           asp-action="Index" 
                           asp-route-id="@user.UserID" 
                           class="font-medium text-brand-light hover:text-brand-link">
                            @user.UserName
                        </a>
                    </div>

                    <!-- Right section: friendship button -->
                    @if (user.UserID.ToString() != loggedInUserId)
                    {
                        <div>
                            @await Component.InvokeAsync("FriendshipButton", user)
                        </div>
                    }
                </li>
            }
        </ul>
    }
</div>
