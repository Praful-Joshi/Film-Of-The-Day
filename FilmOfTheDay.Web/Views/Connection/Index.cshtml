@model FilmOfTheDay.Web.Models.Connection.FriendsPageViewModel
@using System.Security.Claims

@{
    ViewData["Title"] = "Friends";
    var loggedInUserId = User.FindFirstValue(ClaimTypes.NameIdentifier);
}

<div class="max-w-full sm:w-1/2 mx-auto py-8">
    <h1 class="text-2xl font-bold text-brand-light text-center mb-6">Friends</h1>

    @if (Model.FriendsList == null || !Model.FriendsList.Any())
    {
        <p class="text-center text-brand-muted">No friends yet.</p>
    }
    else
    {
        <ul class="bg-brand-black divide-y divide-gray-800 rounded-lg shadow">
            @foreach (var friend in Model.FriendsList)
            {
                <li class="flex items-center justify-between p-4 hover:bg-brand-black-hover transition">
                    <div class="flex items-center">
                        <img src="~/images/profile-placeholder.png"
                             alt="@friend.UserName"
                             class="w-10 h-10 rounded-full mr-3 object-cover" />

                        <a asp-controller="Profile"
                           asp-action="Index"
                           asp-route-id="@friend.UserID"
                           class="font-medium text-brand-light hover:text-brand-link">
                            @friend.UserName
                        </a>
                    </div>

                    @if (friend.UserID.ToString() != loggedInUserId)
                    {
                        @await Component.InvokeAsync("FriendshipButton", friend)
                    }
                </li>
            }
        </ul>
    }
</div>
